import{a,j as e,c as he}from"./index-Q695sD3D.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,s,d)=>d?d.toUpperCase():s.toLowerCase()),G=t=>{const o=fe(t);return o.charAt(0).toUpperCase()+o.slice(1)},K=(...t)=>t.filter((o,s,d)=>!!o&&o.trim()!==""&&d.indexOf(o)===s).join(" ").trim(),ue=t=>{for(const o in t)if(o.startsWith("aria-")||o==="role"||o==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=a.forwardRef(({color:t="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:d,className:p="",children:f,iconNode:g,...x},y)=>a.createElement("svg",{ref:y,...ge,width:o,height:o,stroke:t,strokeWidth:d?Number(s)*24/Number(o):s,className:K("lucide",p),...!f&&!ue(x)&&{"aria-hidden":"true"},...x},[...g.map(([w,C])=>a.createElement(w,C)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=(t,o)=>{const s=a.forwardRef(({className:d,...p},f)=>a.createElement(xe,{ref:f,iconNode:o,className:K(`lucide-${pe(G(t))}`,`lucide-${t}`,d),...p}));return s.displayName=G(t),s};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Q=b("chevron-down",me);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],ve=b("circle-user",be);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],we=b("loader-circle",ye);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ne=b("locate-fixed",ke);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Ce=b("network",je);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ie=b("rotate-ccw",ze);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ee=b("search",Se);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$e=b("triangle-alert",Me);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ae=b("user",Le);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Te=b("x",Re);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],De=b("zoom-in",_e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Fe=b("zoom-out",Pe),He=({data:t,onSelect:o})=>{const[s,d]=a.useState(""),[p,f]=a.useState(!1),g=a.useRef(null),x=a.useMemo(()=>{const n=[],h=z=>{z&&z.forEach(c=>{n.push({name:c.name,title:c.title,department:c.department,id:c.distinguishedName,distinguishedName:c.distinguishedName}),c.children&&h(c.children)})};return h(t),n},[t]),y=a.useMemo(()=>{if(!s||s.length<2)return[];const n=s.toLowerCase();return x.filter(h=>h.name&&h.name.toLowerCase().includes(n)).slice(0,8)},[s,x]);a.useEffect(()=>{const n=h=>{g.current&&!g.current.contains(h.target)&&f(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);const w=n=>{d(n.name),f(!1),o(n.id)},C=()=>{d(""),f(!1)};return e.jsxs("div",{className:"search-component",ref:g,children:[e.jsxs("div",{className:`search-input-wrapper ${p?"active":""}`,children:[e.jsx(Ee,{size:16,className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"Buscar colaborador...",value:s,onChange:n=>{d(n.target.value),f(!0)},onFocus:()=>f(!0)}),s&&e.jsx("button",{className:"clear-btn",onClick:C,children:e.jsx(Te,{size:14})})]}),p&&y.length>0&&e.jsx("div",{className:"search-dropdown",children:y.map(n=>e.jsxs("div",{className:"search-item",onClick:()=>w(n),children:[e.jsx("div",{className:"item-avatar",children:e.jsx(Ae,{size:16})}),e.jsxs("div",{className:"item-info",children:[e.jsx("span",{className:"item-name",children:n.name}),e.jsxs("span",{className:"item-meta",children:[n.title," • ",n.department]})]})]},n.id))}),p&&s.length>=2&&y.length===0&&e.jsx("div",{className:"search-dropdown empty",children:e.jsx("span",{children:"Nenhum resultado encontrado"})}),e.jsx("style",{children:`
                .search-component {
                    position: relative;
                    width: 300px;
                }
                .search-input-wrapper {
                    display: flex;
                    align-items: center;
                    background: #fff;
                    border: 1px solid #e2e8f0;
                    border-radius: 8px;
                    padding: 8px 12px;
                    transition: all 0.2s;
                    position: relative;
                }
                .search-input-wrapper:focus-within {
                    border-color: #3b82f6;
                    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
                }
                .search-icon {
                    color: #94a3b8;
                    margin-right: 8px;
                }
                .search-input-wrapper input {
                    border: none;
                    outline: none;
                    width: 100%;
                    font-size: 0.9rem;
                    color: #0f172a;
                }
                .clear-btn {
                    background: none;
                    border: none;
                    color: #94a3b8;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    padding: 4px;
                }
                .clear-btn:hover { color: #64748b; }

                .search-dropdown {
                    position: absolute;
                    top: 100%;
                    left: 0;
                    right: 0;
                    margin-top: 8px;
                    background: #fff;
                    border: 1px solid #e2e8f0;
                    border-radius: 8px;
                    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
                    max-height: 300px;
                    overflow-y: auto;
                    z-index: 100;
                    padding: 4px;
                }
                .search-item {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 8px 12px;
                    border-radius: 6px;
                    cursor: pointer;
                    transition: background 0.15s;
                }
                .search-item:hover {
                    background: #f1f5f9;
                }
                .item-avatar {
                    width: 32px;
                    height: 32px;
                    background: #e2e8f0;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: #64748b;
                }
                .item-info {
                    display: flex;
                    flex-direction: column;
                    overflow: hidden;
                }
                .item-name {
                    font-weight: 500;
                    font-size: 0.9rem;
                    color: #0f172a;
                }
                .item-meta {
                    font-size: 0.75rem;
                    color: #64748b;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                }
                .search-dropdown.empty {
                    padding: 16px;
                    text-align: center;
                    color: #94a3b8;
                    font-size: 0.9rem;
                }
            `})]})},J=a.createContext({hoveredNodeId:null,setHoveredNodeId:()=>{},focusedNodeId:null,setFocusedNodeId:()=>{},ancestorIds:new Set}),Oe=t=>{if(!t)return"#64748b";const o={Financeiro:"#059669",Comercial:"#d97706",Vendas:"#d97706",TI:"#2563eb",Tecnologia:"#2563eb","Recursos Humanos":"#db2777",RH:"#db2777",Diretoria:"#0f172a",Executivo:"#0f172a",Jurídico:"#7c3aed",Marketing:"#ea580c",Operações:"#0891b2"};if(o[t])return o[t];let s=0;for(let p=0;p<t.length;p++)s=t.charCodeAt(p)+((s<<5)-s);return`hsl(${Math.abs(s%360)}, 60%, 40%)`},Ue=t=>{if(!t)return"";const o=t.split(" ");return o.length>=2?`${o[0][0]}${o[o.length-1][0]}`.toUpperCase():t[0].toUpperCase()},Ve=({node:t,isExpanded:o,toggleNode:s,hasChildren:d,isMatch:p,parentId:f})=>{const{hoveredNodeId:g,setHoveredNodeId:x,focusedNodeId:y,setFocusedNodeId:w,ancestorIds:C}=a.useContext(J),n=a.useMemo(()=>Oe(t.department),[t.department]),h=t.distinguishedName,z=g===h,c=y===h,$=g===f&&g!==null,I=C.has(h),T=(g!==null||y!==null)&&!(z||c||$||I),L=t.title&&(t.title.toLowerCase().includes("presidente")||t.title.toLowerCase().includes("ceo")||t.title.toLowerCase().includes("diretor")),_=N=>{N.stopPropagation(),x(h)},P=()=>{x(null)},D=N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),w(h),d&&s())};return e.jsxs("div",{id:h,className:`
                org-card
                ${p?"highlight":""}
                ${L?"executive":""}
                ${z?"state-active":""}
                ${c?"state-focused":""}
                ${$?"state-subordinate":""}
                ${I?"state-ancestor":""}
                ${T?"state-dimmed":""}
            `,onClick:N=>{N.stopPropagation(),w(h),d&&s()},onKeyDown:D,onMouseEnter:_,onMouseLeave:P,style:{"--dept-color":n},role:"button","aria-expanded":o,"aria-label":`${t.name}, ${t.title}`,tabIndex:0,children:[e.jsx("div",{className:"card-accent"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"avatar",style:{backgroundColor:L?"#0f172a":`${n}10`,color:L?"#fff":n},children:Ue(t.name)}),e.jsxs("div",{className:"info",children:[e.jsx("h6",{className:"name",title:t.name,children:t.name}),e.jsx("p",{className:"role",title:t.title,children:t.title||"Cargo não definido"})]})]}),t.department&&e.jsx("div",{className:"card-footer",children:e.jsx("span",{className:"dept-badge",style:{backgroundColor:`${n}08`,color:n,borderColor:`${n}20`},children:t.department})})]}),d&&e.jsx("div",{className:`toggle-btn ${o?"expanded":""}`,children:e.jsx(Q,{size:14,className:"icon-chevron"})})]})},Be=()=>{const[t,o]=a.useState([]),[s,d]=a.useState(!0),[p,f]=a.useState(null),[g,x]=a.useState(1),[y,w]=a.useState(new Set),[C,n]=a.useState(new Set),[h,z]=a.useState(null),[c,$]=a.useState(null),[I,R]=a.useState(new Set),k=a.useRef(null),[T,L]=a.useState(!1),[_,P]=a.useState({x:0,y:0}),[D,N]=a.useState({left:0,top:0});a.useEffect(()=>{fetch("/api/public/organogram_data").then(r=>{if(!r.ok)throw new Error("Falha ao carregar dados");return r.json()}).then(r=>{const l=Array.isArray(r)?r:[];o(l);const i=new Set;l.forEach((v,j)=>{const S=v.distinguishedName||j;i.add(S)}),w(i),d(!1)}).catch(r=>{f(r.message),d(!1)})},[]);const F=(r,l,i=[])=>{for(const v of r){const j=v.distinguishedName;if(j===l)return[...i,j];if(v.children){const S=F(v.children,l,[...i,j]);if(S)return S}}return null};a.useEffect(()=>{const r=h||c;if(r){const l=F(t,r);R(l?new Set(l):new Set)}else R(new Set)},[h,c,t]),a.useEffect(()=>{const r=k.current;if(!r)return;const l=i=>{i.ctrlKey||i.metaKey;{i.preventDefault();const v=-i.deltaY*.001;x(j=>Math.min(Math.max(j+v,.4),2))}};return r.addEventListener("wheel",l,{passive:!1}),()=>r.removeEventListener("wheel",l)},[]),a.useEffect(()=>{if(c){setTimeout(()=>{const l=document.getElementById(c);l&&l.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100);const r=setTimeout(()=>{$(null)},3e3);return()=>clearTimeout(r)}},[c]);const ee=r=>{k.current&&(L(!0),P({x:r.pageX,y:r.pageY}),N({left:k.current.scrollLeft,top:k.current.scrollTop}))},te=r=>{if(!T||!k.current)return;r.preventDefault();const l=r.pageX-_.x,i=r.pageY-_.y;k.current.scrollLeft=D.left-l,k.current.scrollTop=D.top-i},Z=()=>{L(!1)},re=r=>{w(l=>{const i=new Set(l);return i.has(r)?i.delete(r):i.add(r),i})},oe=r=>{const l=F(t,r);l&&w(i=>new Set([...i,...l])),$(r)},ae=()=>x(r=>Math.min(r+.1,2)),ne=()=>x(r=>Math.max(r-.1,.4)),se=()=>x(1),ie=()=>{if(c){const r=document.getElementById(c);r&&r.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}},X=(r,l=null,i=null)=>{if(!r||!Array.isArray(r)||r.length===0)return null;const v=8,j=i&&C.has(i),S=r.length>v&&!j,H=S?r.slice(0,v):r,le=r.length-v,O=h||c;let U=-1;(O||I.size>0)&&(U=H.findIndex(m=>{const u=m.distinguishedName;return u===O||I.has(u)}));const ce=(H.length-1)/2;return e.jsxs("ul",{className:"org-tree",children:[H.map((m,u)=>{const E=m.distinguishedName||u,W=m.children&&m.children.length>0,Y=y.has(E);let q=!1,V=!1,B=!1;if(U!==-1){const M=U,A=ce;u===M&&(q=!0),M<A?(u>M&&u<=Math.floor(A)&&(V=!0),u>=M&&u<Math.ceil(A)&&(B=!0)):M>A&&(u>Math.floor(A)&&u<=M&&(V=!0),u>=Math.ceil(A)&&u<M&&(B=!0))}const de=I.has(E)&&E!==O;return e.jsxs("li",{className:`
                            org-leaf
                            ${V?"conn-l":""}
                            ${B?"conn-r":""}
                            ${q?"conn-v":""}
                            ${de?"conn-descendant":""}
                        `,children:[e.jsx("div",{className:"connector-vertical"}),e.jsx(Ve,{node:m,isExpanded:Y,toggleNode:()=>re(E),hasChildren:W,isMatch:!1,parentId:l}),W&&Y&&X(m.children,E,E)]},E)}),S&&e.jsxs("li",{className:"org-leaf",children:[e.jsx("div",{className:"connector-vertical"}),e.jsx("div",{className:"org-card group-node",onClick:()=>n(m=>new Set([...m,i])),onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),n(u=>new Set([...u,i])))},role:"button",tabIndex:0,title:"Expandir todos",children:e.jsxs("div",{className:"card-body",style:{alignItems:"center",justifyContent:"center",padding:"12px"},children:[e.jsxs("span",{style:{fontWeight:600,color:"var(--text-secondary)"},children:["+",le," Colaboradores"]}),e.jsx(Q,{size:16,color:"var(--text-secondary)"})]})})]})]})};return s?e.jsxs("div",{className:"loading-container",children:[e.jsx(we,{className:"spinner",size:40}),e.jsx("p",{children:"Carregando estrutura..."})]}):p?e.jsxs("div",{className:"error-container",children:[e.jsx($e,{size:48,className:"text-red-500"}),e.jsxs("p",{children:["Erro ao carregar: ",p]})]}):e.jsx(J.Provider,{value:{hoveredNodeId:h,setHoveredNodeId:z,focusedNodeId:c,setFocusedNodeId:$,ancestorIds:I},children:e.jsxs("div",{className:"organogram-page",children:[e.jsxs("header",{className:"page-header",children:[e.jsxs("div",{className:"brand",children:[e.jsx("div",{className:"brand-icon",children:e.jsx(Ce,{size:20})}),e.jsxs("div",{className:"brand-text",children:[e.jsx("h2",{children:"Organograma"}),e.jsx("span",{children:"Corporativo"})]})]}),e.jsxs("div",{className:"actions",children:[e.jsx(He,{data:t,onSelect:oe}),e.jsxs("div",{className:"zoom-controls",children:[e.jsx("button",{onClick:ie,disabled:!c,title:"Centralizar Seleção",style:{opacity:c?1:.4},children:e.jsx(Ne,{size:16})}),e.jsx("div",{className:"separator"}),e.jsx("button",{onClick:ne,title:"Reduzir Zoom",children:e.jsx(Fe,{size:16})}),e.jsxs("span",{className:"zoom-level",children:[Math.round(g*100),"%"]}),e.jsx("button",{onClick:ae,title:"Aumentar Zoom",children:e.jsx(De,{size:16})}),e.jsx("div",{className:"separator"}),e.jsx("button",{onClick:se,title:"Resetar",children:e.jsx(Ie,{size:14})})]}),e.jsxs("a",{href:"/login",className:"btn-login",children:[e.jsx(ve,{size:18})," Login"]})]})]}),e.jsx("main",{className:`canvas ${T?"grabbing":""}`,ref:k,onMouseDown:ee,onMouseMove:te,onMouseUp:Z,onMouseLeave:Z,children:e.jsx("div",{className:"tree-wrapper",style:{transform:`scale(${g})`},children:X(t)})}),e.jsx("style",{children:`
                    /* --- Fonts & Vars --- */
                    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

                    :root {
                        --bg-page: #f8fafc; /* Slate 50 */
                        --bg-card: #FAFAFB; /* Off-white premium */
                        --text-primary: #1e293b; /* Slate 800 */
                        --text-secondary: #64748b; /* Slate 500 */
                        --border-color: #e2e8f0; /* Slate 200 */
                        --line-color: #cbd5e1; /* Slate 300 */
                        --line-active: #3b82f6; /* Blue 500 */

                        /* Shadows - Premium Depth */
                        --shadow-sm: 0 2px 4px rgba(0,0,0,0.02), 0 1px 2px rgba(0,0,0,0.03);
                        --shadow-md: 0 8px 16px -4px rgba(0,0,0,0.04), 0 4px 8px -2px rgba(0,0,0,0.02);
                        --shadow-hover: 0 20px 30px -8px rgba(0,0,0,0.08), 0 8px 12px -4px rgba(0,0,0,0.03);

                        --ease-out: cubic-bezier(0.25, 0.46, 0.45, 0.94);
                    }

                    * { box-sizing: border-box; }

                    .organogram-page {
                        font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
                        background-color: var(--bg-page);
                        height: 100vh;
                        display: flex;
                        flex-direction: column;
                        overflow: hidden;
                        color: var(--text-primary);
                    }

                    /* --- Header --- */
                    .page-header {
                        background: rgba(255, 255, 255, 0.85);
                        backdrop-filter: blur(12px);
                        border-bottom: 1px solid var(--border-color);
                        height: 72px;
                        padding: 0 32px;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        z-index: 50;
                        box-shadow: var(--shadow-sm);
                    }

                    .brand {
                        display: flex;
                        align-items: center;
                        gap: 12px;
                    }
                    .brand-icon {
                        width: 36px;
                        height: 36px;
                        background: var(--text-primary);
                        color: #fff;
                        border-radius: 8px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    }
                    .brand-text h2 {
                        margin: 0;
                        font-size: 1rem;
                        font-weight: 700;
                        letter-spacing: -0.02em;
                        line-height: 1.2;
                    }
                    .brand-text span {
                        font-size: 0.75rem;
                        color: var(--text-secondary);
                        font-weight: 500;
                        text-transform: uppercase;
                        letter-spacing: 0.05em;
                    }

                    .actions {
                        display: flex;
                        align-items: center;
                        gap: 24px;
                    }

                    /* Zoom */
                    .zoom-controls {
                        display: flex;
                        align-items: center;
                        background: #fff;
                        border: 1px solid var(--border-color);
                        border-radius: 8px;
                        padding: 4px;
                        box-shadow: var(--shadow-sm);
                    }
                    .zoom-controls button {
                        width: 32px;
                        height: 32px;
                        border: none;
                        background: transparent;
                        border-radius: 6px;
                        color: var(--text-secondary);
                        cursor: pointer;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        transition: all 0.15s;
                    }
                    .zoom-controls button:hover {
                        background: var(--bg-page);
                        color: var(--text-primary);
                    }
                    .zoom-level {
                        font-size: 0.8rem;
                        font-weight: 600;
                        width: 48px;
                        text-align: center;
                        font-variant-numeric: tabular-nums;
                    }
                    .separator {
                        width: 1px;
                        height: 16px;
                        background: var(--border-color);
                        margin: 0 4px;
                    }

                    .btn-login {
                        background: var(--text-primary);
                        color: #fff;
                        text-decoration: none;
                        padding: 10px 16px;
                        border-radius: 8px;
                        font-size: 0.9rem;
                        font-weight: 600;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                        transition: all 0.2s;
                    }
                    .btn-login:hover {
                        background: #334155;
                        transform: translateY(-1px);
                    }

                    /* --- Canvas --- */
                    .canvas {
                        flex: 1;
                        overflow: auto;
                        padding: 80px 40px;
                        cursor: grab;
                        background-image:
                            radial-gradient(#e2e8f0 1px, transparent 1px);
                        background-size: 24px 24px;
                        user-select: none; /* Prevent text selection while dragging */
                    }
                    .canvas:active { cursor: grabbing; }
                    .canvas.grabbing { cursor: grabbing; }

                    .tree-wrapper {
                        display: flex;
                        justify-content: center;
                        width: max-content;
                        min-width: 100%;
                        transform-origin: top center;
                        transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
                    }

                    .org-tree {
                        display: flex;
                        justify-content: center;
                        list-style: none;
                        padding: 0;
                        margin: 0;
                        position: relative;
                    }

                    .org-leaf {
                        position: relative;
                        padding: 60px 32px 0 32px;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                    }

                    /* --- Connectors --- */
                    /* Vertical line from parent (ul::before) */
                    .org-tree::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 50%;
                        width: 2px;
                        height: 30px;
                        background-color: var(--line-color);
                        transform: translateX(-50%);
                        transition: all 0.2s var(--ease-out);
                    }

                    /* Horizontal Arms */
                    .org-leaf::before, .org-leaf::after {
                        content: '';
                        position: absolute;
                        top: 0;
                        right: 50%;
                        border-top: 2px solid var(--line-color);
                        width: 50%;
                        height: 30px;
                        transition: all 0.2s var(--ease-out);
                    }
                    .org-leaf::after {
                        right: auto;
                        left: 50%;
                        border-left: none; /* REMOVED vertical line part */
                    }

                    /* New Separate Vertical Connector */
                    .connector-vertical {
                        position: absolute;
                        top: 0;
                        left: 50%;
                        width: 2px;
                        height: 60px; /* Covers the full padding-top */
                        background-color: var(--line-color);
                        transform: translateX(-50%);
                        z-index: 0;
                        transition: all 0.2s var(--ease-out);
                    }

                    /* Exceptions */
                    .tree-wrapper > .org-tree::before { display: none; }
                    .tree-wrapper > .org-tree > .org-leaf { padding-top: 0; }
                    .tree-wrapper > .org-tree > .org-leaf > .connector-vertical { display: none; } /* Root has no parent line */

                    /* Only Child: Hide horizontal arms, keep vertical */
                    .org-leaf:only-child::after { display: none; }
                    .org-leaf:only-child::before { display: none; }
                    /* Vertical connector handles the link for only-child naturally now */

                    .org-leaf:first-child::before, .org-leaf:last-child::after { border: 0 none; }

                    /* Corners */
                    .org-leaf:last-child::before {
                        border-right: 2px solid var(--line-color);
                        border-radius: 0 16px 0 0;
                    }
                    .org-leaf:first-child::after {
                        border-left: 2px solid var(--line-color); /* Add border-left back for the corner curve? No. */
                        border-radius: 16px 0 0 0;
                    }
                    /* Wait, border-radius needs the vertical border to curve. */
                    /* Since I removed border-left from ::after, the curve might look broken for first-child::after if I relied on border-left. */
                    /* Actually, ::after is "Center to Right". ::before is "Left to Center". */
                    /* If I am first child (Leftmost), I have ::after (going to center). ::before is hidden. */
                    /* If I am last child (Rightmost), I have ::before (going to center). ::after is hidden. */

                    /* The "corner" is where the horizontal line meets the vertical line FROM THE PARENT? No. */
                    /* The corner is where the horizontal line meets the vertical line TO THE CHILD? No. */
                    /* In standard tree, the vertical line drops from parent, hits the bar. */
                    /* The bar splits to children. */
                    /* At the child end, the horizontal bar meets the vertical line down to the card. */
                    /* If I separated horizontal and vertical, the "corner" is formed by the intersection. */
                    /* It is a sharp 90 degree turn. */
                    /* If we want rounded corners, we need the border-radius on the element that has both borders. */
                    /* But now I separated them. */
                    /* So we lose rounded corners at the "T" junction above the card? */
                    /* Actually, standard tree has rounded corners at the PARENT end? */
                    /* "last-child::before": Is the line from Left-Edge to Center. */
                    /* It has border-right (Vertical Up to Parent?) and border-top. */
                    /* Wait, standard tree CSS relies on border-right of ::before to be the vertical line? */
                    /* No, usually ul::before is the vertical line. */

                    /* Let's stick to sharp corners or simple corners for now to ensure robustness of highlighting. */
                    /* The separation gives us control. Rounded corners can be added later if needed, but are complex with path tracing. */

                    .org-leaf:last-child::before {
                        border-right: 2px solid var(--line-color);
                        border-radius: 0 16px 0 0;
                    }
                     .org-leaf:first-child::after {
                        border-left: 2px solid var(--line-color);
                        border-radius: 16px 0 0 0;
                    }
                    /* Re-adding border-left/right for corners on outer nodes implies vertical lines exist there. */
                    /* But ::before/::after are 30px high. */
                    /* And my vertical connector is centered. */
                    /* If I have border-right on last-child::before (which is "Left to Center"), that vertical line is at the CENTER of the node? */
                    /* Yes, ::before is right: 50%. border-right is at the center. */
                    /* So this creates a vertical line at the center, going up? */
                    /* Yes. This connects to the parent vertical line. */
                    /* So removing border-left from ::after generally breaks the "Center Up" connection for first-child? */

                    /* Refined Plan: */
                    /* The vertical line UP to the parent is formed by: */
                    /* 1. ul::before (Parent down to middle of children). */
                    /* 2. For last-child: ::before border-right (at center). */
                    /* 3. For first-child: ::after border-left (at center). */
                    /* 4. For middle children: No vertical line up needed? They are under the bar. */

                    /* Actually, usually the parent line drops to the siblings' common bar. */
                    /* The common bar is formed by all siblings. */
                    /* No vertical line UP from specific siblings is needed to meet the parent, except to close the gap? */
                    /* ul::before height is 30px. */
                    /* li padding-top is 0 in standard tree? No, usually 20px. */
                    /* The horizontal bar is at the top of li. */
                    /* So ul::before meets li top. */

                    /* My Vertical Connector (down to card) is separate. */
                    /* So I should keep the corner logic for the top junctions if possible, but highlighting them is tricky. */
                    /* Let's disable rounded corners for now to ensure the lines meet perfectly without gaps. */
                    .org-leaf:last-child::before { border-right: none; border-radius: 0; }
                    .org-leaf:first-child::after { border-left: none; border-radius: 0; }

                    /* Connector DOWN to children (ul::before) */
                    .org-leaf > ul::before {
                        content: '';
                        position: absolute;
                        top: -30px;
                        left: 50%;
                        width: 2px;
                        height: 30px;
                        background-color: var(--line-color);
                        transform: translateX(-50%);
                        transition: all 0.2s var(--ease-out);
                    }

                    /* --- Active Connection States --- */

                    @keyframes pulse-line {
                        0% { opacity: 0.6; }
                        50% { opacity: 1; }
                        100% { opacity: 0.6; }
                    }

                    /* Left Path Highlight */
                    .org-leaf.conn-l::before {
                        border-color: var(--line-active);
                        animation: pulse-line 2s infinite ease-in-out;
                        z-index: 1;
                    }

                    /* Right Path Highlight */
                    .org-leaf.conn-r::after {
                        border-color: var(--line-active);
                        animation: pulse-line 2s infinite ease-in-out;
                        z-index: 1;
                    }

                    /* Vertical Stem Highlight */
                    .org-leaf.conn-v > .connector-vertical {
                        background-color: var(--line-active);
                        animation: pulse-line 2s infinite ease-in-out;
                        z-index: 1;
                    }

                    /* Descendant (Downward from ancestor) Highlight */
                    .org-leaf.conn-descendant > ul::before {
                        background-color: var(--line-active);
                        animation: pulse-line 2s infinite ease-in-out;
                        z-index: 1;
                    }

                    /* --- Card Styles --- */
                    .org-card {
                        background: var(--bg-card);
                        width: 280px;
                        position: relative;
                        border-radius: 12px;
                        box-shadow: var(--shadow-md);
                        transition: all 0.2s var(--ease-out);
                        cursor: pointer;
                        z-index: 2;
                        border: 1px solid transparent;
                        display: flex;
                        flex-direction: row;
                        outline: none;
                    }

                    /* Left Accent Bar */
                    .card-accent {
                        width: 5px;
                        height: 100%;
                        background-color: var(--dept-color);
                        flex-shrink: 0;
                    }

                    .card-body {
                        flex: 1;
                        padding: 14px 16px;
                        display: flex;
                        flex-direction: column;
                        gap: 10px;
                        border-radius: 0 12px 12px 0;
                    }

                    /* Hover State */
                    .org-card.state-active {
                        transform: scale(1.03);
                        box-shadow: var(--shadow-hover);
                        z-index: 50;
                        border-color: var(--line-active);
                    }

                    /* Focused State */
                    .org-card.state-focused {
                        transform: scale(1.03);
                        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3), var(--shadow-hover);
                        border-color: var(--line-active);
                        z-index: 50;
                    }

                    /* Subordinate State */
                    .org-card.state-subordinate {
                        transform: translateY(-2px);
                        box-shadow: var(--shadow-md);
                        background-color: #fff;
                        border: 1px solid var(--line-active);
                    }

                    /* Ancestor State */
                    .org-card.state-ancestor {
                         box-shadow: var(--shadow-md);
                    }

                    /* Dimmed State */
                    .org-card.state-dimmed {
                        opacity: 0.55;
                        filter: grayscale(0.6);
                        transform: scale(0.98);
                    }

                    /* Highlight (Search Match) */
                    .org-card.highlight {
                        background-color: #fffbeb;
                        border: 1px solid #f59e0b;
                    }

                    /* Header Layout */
                    .card-header {
                        display: flex;
                        align-items: center;
                        gap: 14px;
                    }

                    .avatar {
                        width: 42px;
                        height: 42px;
                        border-radius: 50%; /* Circular for modern look */
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-weight: 700;
                        font-size: 1rem;
                        flex-shrink: 0;
                        box-shadow: inset 0 0 0 1px rgba(0,0,0,0.05);
                    }

                    .info {
                        flex: 1;
                        min-width: 0;
                    }

                    .name {
                        margin: 0;
                        font-size: 1rem;
                        font-weight: 700;
                        color: var(--text-primary);
                        white-space: nowrap;
                        overflow: hidden;
                        text-overflow: ellipsis;
                        letter-spacing: -0.015em;
                        line-height: 1.2;
                    }

                    .role {
                        margin: 3px 0 0 0;
                        font-size: 0.85rem;
                        color: var(--text-secondary);
                        font-weight: 500;
                        display: -webkit-box;
                        -webkit-line-clamp: 2;
                        -webkit-box-orient: vertical;
                        overflow: hidden;
                        line-height: 1.35;
                    }

                    /* Footer */
                    .card-footer {
                        padding-top: 4px;
                        display: flex;
                    }

                    .dept-badge {
                        font-size: 0.7rem;
                        font-weight: 600;
                        padding: 3px 10px;
                        border-radius: 6px;
                        border: 1px solid;
                        text-transform: uppercase;
                        letter-spacing: 0.04em;
                        max-width: 100%;
                        white-space: nowrap;
                        overflow: hidden;
                        text-overflow: ellipsis;
                        background-color: transparent; /* Overridden inline */
                    }

                    /* Group Node */
                    .group-node {
                        height: 60px;
                        border: 1px dashed var(--line-color);
                        background: rgba(255,255,255,0.5);
                    }
                    .group-node:hover {
                        border-color: var(--line-active);
                        background: #fff;
                    }

                    /* Toggle Button */
                    .toggle-btn {
                        position: absolute;
                        bottom: -14px;
                        left: 50%;
                        transform: translateX(-50%);
                        width: 28px;
                        height: 28px;
                        background: #fff;
                        border: 1px solid var(--border-color);
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 0.8rem;
                        color: var(--text-secondary);
                        box-shadow: var(--shadow-sm);
                        transition: all 0.2s;
                        z-index: 5;
                    }
                    .toggle-btn:hover {
                        color: var(--text-primary);
                        border-color: var(--text-secondary);
                        transform: translateX(-50%) scale(1.1);
                    }
                    .toggle-btn.expanded .icon-chevron {
                        transform: rotate(180deg);
                        transition: transform 0.3s;
                    }

                    /* Loading / Error */
                    .loading-container, .error-container {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        height: 100vh;
                        color: var(--text-secondary);
                        gap: 16px;
                    }
                    .spinner {
                        color: var(--text-primary);
                        animation: spin 1s linear infinite;
                    }
                    @keyframes spin { to { transform: rotate(360deg); } }

                `})]})})};he.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(Be,{})}));
